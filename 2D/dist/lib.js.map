{"version":3,"sources":["arc.ts","demo.ts"],"names":["Arc","Arc.constructor","Arc.centerX","Arc.centerY","Arc.radius","Arc.startAngle","Arc.endAngle","Arc.rotation","Arc.color","Arc.alpha","Arc.draw","Demo","Demo.constructor","Demo.getDevicePixelRatio","Demo.adjustForRetina","Demo.getRandomColor","Demo.degreesToRadiants","Demo.createPieParts","Demo.assignEvents","Demo.processMove","Demo.startAnimation","Demo.stopAnimation","Demo.draw"],"mappings":"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","file":"lib.js","sourcesContent":["class Arc {\n    private _context: CanvasRenderingContext2D;\n\n    constructor(context: CanvasRenderingContext2D) {\n        this._context = context;\n    }\n\n    private _centerX: number;\n    public get centerX(): number {\n        return this._centerX;\n    }\n    public set centerX(v: number) {\n        this._centerX = v;\n    }\n    \n    private _centerY : number;\n    public get centerY() : number {\n        return this._centerY;\n    }\n    public set centerY(v : number) {\n        this._centerY = v;\n    }\n    \n    private _radius : number;\n    public get radius() : number {\n        return this._radius;\n    }\n    public set radius(v : number) {\n        this._radius = v;\n    }\n    \n    private _startAngle : number;\n    public get startAngle() : number {\n        return this._startAngle;\n    }\n    public set startAngle(v : number) {\n        this._startAngle = v;\n    }\n    \n    private _endAngle : number;\n    public get endAngle() : number {\n        return this._endAngle;\n    }\n    public set endAngle(v : number) {\n        this._endAngle = v;\n    }\n    \n    private _rotation : number = 0;\n    public get rotation() : number {\n        return this._rotation;\n    }\n    public set rotation(v : number) {\n        this._rotation = v;\n    }\n    \n    private _color: Array<number>;\n    public get color() : Array<number> {\n        return this._color;\n    }\n    public set color(v : Array<number>) {\n        this._color = v;\n    }\n    \n    private _alpha : number = 1;\n    public get alpha() : number {\n        return this._alpha;\n    }\n    public set alpha(v : number) {\n        this._alpha = v;\n    }\n    \n    public draw(): void {\n        this._context.save();\n        this._context.translate(this.centerX, this.centerY);\n        this._context.rotate(this.rotation);\n        this._context.fillStyle = 'rgba(' + this._color.join() + ',' + this._alpha + ')';\n        this._context.beginPath();\n        this._context.moveTo(0, 0);\n        this._context.arc(0, 0, this.radius, this.startAngle, this.endAngle);\n        this._context.closePath();\n        this._context.fill();\n        this._context.restore();\n    }    \n}","/// <reference path=\"../typings/tsd.d.ts\" />\n/// <reference path=\"arc.ts\" />\n\nclass Demo {\n    private _canvas: HTMLCanvasElement;\n    private _context: CanvasRenderingContext2D;\n    private _width: number;\n    private _height: number;\n\n    private _pieParts: Array<Arc> = new Array<Arc>();\n    private _pieValues: Array<number>;\n    private _animationFrame: number;\n\n    constructor(canvas: HTMLCanvasElement, values: Array<number>) {\n        this._canvas = canvas;\n        this._context = <CanvasRenderingContext2D> canvas.getContext('2d');\n        this._pieValues = values;\n\n        this._width = canvas.width;\n        this._height = canvas.height;\n\n        this.adjustForRetina();\n        this.createPieParts();\n\n        this.assignEvents();\n    }\n\n    private getDevicePixelRatio(): number {\n        return window.devicePixelRatio || 1;\n    }\n\n    private adjustForRetina(): void {\n        var factor: number;\n        if ((factor = this.getDevicePixelRatio()) > 1) {\n            var factor = window.devicePixelRatio;\n\n            this._canvas.width = this._width * factor;\n            this._canvas.height = this._height * factor;\n\n            this._canvas.style.width = this._width + 'px';\n            this._canvas.style.height = this._height + 'px';\n\n            this._context.scale(factor, factor);\n        }\n    }\n\n    private getRandomColor(): Array<number> {\n        return [Math.floor(Math.random() * 254), Math.floor(Math.random() * 254), Math.floor(Math.random() * 254)];\n    }\n\n    private degreesToRadiants(degrees: number): number {\n        return (degrees * Math.PI) / 180;\n    }\n\n    private createPieParts(): void {\n        var centerX: number = this._width / 2;\n        var centerY: number = this._height / 2;\n        var radius: number = this._width / 2 - 50;\n        var rotationDeg: number = 0;\n\n        this._pieValues.forEach(value => {\n            var arc = new Arc(this._context);\n\n            arc.color = this.getRandomColor();\n            arc.alpha = 0.5;\n            arc.centerX = centerX;\n            arc.centerY = centerY;\n            arc.radius = radius;\n            arc.startAngle = this.degreesToRadiants(rotationDeg);\n            arc.endAngle = arc.startAngle + this.degreesToRadiants(value * 3.6);\n            rotationDeg += value * 3.6;\n\n            this._pieParts.push(arc);\n        });\n    }\n\n    private assignEvents(): void {\n        var that = this;\n\n        that._canvas.addEventListener('mousemove', event => {\n            that.processMove(event.layerX, event.layerY);\n        });\n    }\n\n    private processMove(x: number, y: number): void {\n        var that = this;\n        var factor = this.getDevicePixelRatio();\n        var color = this._context.getImageData(x * factor, y * factor, 1, 1).data;\n\n        this._pieParts.forEach(part => {\n            part.alpha = 0.5;\n\n            if (part.color[0] === color[0] || part.color[0] === color[0] - 1 || part.color[0] === color[0] + 1) {\n                part.alpha = 1;\n            }\n        });\n\n        window.requestAnimationFrame(() => {\n            that.draw();\n        });\n    }\n\n    public startAnimation(): void {\n        var that = this;\n        var animationframeCallback = function() {\n            that._pieParts.forEach(part => {\n                part.rotation += that.degreesToRadiants(1);\n            });\n\n            that.draw();\n\n            that._animationFrame = window.requestAnimationFrame(animationframeCallback);\n        }\n\n        that._animationFrame = window.requestAnimationFrame(animationframeCallback);\n    }\n    \n    public stopAnimation(): void {\n        window.cancelAnimationFrame(this._animationFrame);\n    }\n\n    public draw(): void {\n        var c: CanvasRenderingContext2D = this._context;\n\n        c.clearRect(0, 0, this._width, this._height);\n\n        this._pieParts.forEach(part => {\n            part.draw();\n        });\n    }\n}"],"sourceRoot":"/source/"}